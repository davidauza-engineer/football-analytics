<div class="step-text">
<p>In our previous topics we have already figured out that SQL language uses different expressions, such as arithmetic, logic, and comparisons to extract required data from tables. Those expressions make queries specific. This time let's get into details of logic expressions and comparisons in order to understand how they work.</p><p>Imagine that you are responsible for a book store database. You already know how to select preprocessed info about all entities from a table "books". There are so many rows in each selection, and you need to filter them according to certain criteria, for example, by author, language, some attribute or even expression requested by the client. The selection of a subset of rows from a table is called <strong>filtering</strong>. </p><h5 id="filtering-by-a-criteria">Filtering by a criteria</h5><p>In most cases when we proceed with a query, we want to extract only those records that comply with certain criteria. In order to filter the selection, there is a special operator <code class="language-sql">WHERE</code> in SQL.</p><p>The syntax for this operator is as follows:</p><pre><code class="language-sql">SELECT *
FROM table
WHERE conditions</code></pre><p>In the <code class="language-sql">conditions</code> field we can insert any parameters we want our extracted data to be consistent with. However, in order to define those specific selection conditions, we need to apply them to expressions.</p><p>Let's imagine that your first client wants to buy a book by Charles Dickens. Let's write a query that selects books that meet the criteria:</p><pre><code class="language-sql">SELECT id, title, rating
FROM books
WHERE author = 'Charles Dickens';
</code></pre><p>At the end of the <code class="language-sql">SELECT</code> statement, we added a keyword<strong> </strong><code class="language-sql">WHERE</code> followed by the logical expression that specifies the filters <code class="language-sql">author = 'Charles Dickens'</code>.</p><p> </p><p>The <code class="language-sql">SELECT</code> clause doesn't have to contain the columns or expressions listed in the <code class="language-sql">WHERE</code> clause. For example, we didn't have to output <code class="language-sql">author</code> in the query above even though there is a corresponding condition in <code class="language-sql">WHERE</code>.</p><p> </p><h5 id="filtering-with-comparisons">Filtering with Comparisons</h5><p>This is a full list of comparisons operations that can be used in the <code class="language-sql">WHERE</code> operator.</p><table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><p>=</p></td><td><p>equality check</p></td></tr><tr><td><p>&lt;, &gt;</p></td><td><p>less, greater</p></td></tr><tr><td><p>&lt;=, &gt;=</p></td><td><p>less or equal, greater or equal</p></td></tr><tr><td><p>!&lt;, !&gt;</p></td><td><p>not less than, not greater than</p></td></tr><tr><td><p>&lt;&gt;, !=</p></td><td><p>not equal</p></td></tr></tbody></table><p>Usually, we apply comparisons to numerical values. In case we want to make a selection by string literals or dates, we should put those in quotation marks (<code class="language-sql">" "</code>).</p><p>Below are some examples of data extraction from the table<em> </em><code class="language-sql">products</code> using comparisons.</p><table border="1" cellpadding="1" cellspacing="1" style="width: 500px;"><tbody><tr><th><p><strong>product_id</strong></p></th><th><p><strong>product_name</strong></p></th><th><p><strong>price</strong></p></th><th><p><strong>category</strong></p></th></tr><tr><td><p>1</p></td><td><p>Milk</p></td><td><p>70</p></td><td><p>dairy</p></td></tr><tr><td><p>2</p></td><td><p>Cheese</p></td><td><p>500</p></td><td><p>dairy</p></td></tr><tr><td><p>3</p></td><td><p>Chicken</p></td><td><p>250</p></td><td><p>meat</p></td></tr><tr><td><p>4</p></td><td><p>Pork</p></td><td><p>350</p></td><td><p>meat</p></td></tr><tr><td><p>5</p></td><td><p>Potato</p></td><td><p>40</p></td><td><p>vegetables</p></td></tr><tr><td><p>6</p></td><td><p>Tomato</p></td><td><p>150</p></td><td><p>vegetables</p></td></tr></tbody></table><p><br/>Let's say, we want to know which products in our table cost more than 250. This time we use the <code class="language-sql">&gt;</code> operator. The query looks like this:</p><pre><code class="language-sql">SELECT *
FROM products
WHERE price &gt; 250</code></pre><p>Below we can see what our table with the requested items looks like:</p><table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><p><strong>product_id</strong></p></td><td><p><strong>product_name</strong></p></td><td><p><strong>price</strong></p></td><td><p><strong>category</strong></p></td></tr><tr><td><p>2</p></td><td><p>Cheese</p></td><td><p>500</p></td><td><p>dairy</p></td></tr><tr><td><p>4</p></td><td><p>Pork</p></td><td><p>350</p></td><td><p>meat</p></td></tr></tbody></table><p>Pretty simple, isn't it?</p><p>If we want to select items that cost more than or equal to 250, we should use <code class="language-sql">&gt;=</code> instead. The same principle works for comparisons <code class="language-sql">&lt;</code> and <code class="language-sql">&lt;=</code>. Let's study one more example to make sure we are clear about it.</p><p>This time, we want to select all products from the table that are related to the <code class="language-sql">vegetables</code> category. Our SQL query will look like this:</p><pre><code class="language-sql">SELECT *
FROM products
WHERE category = 'vegetables'</code></pre><p>Note, that quotation marks are essential when we make a selection by a string literal. If you forget them, the query won't work.</p><p>The result of our selection seems to be correct:</p><table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><p><strong>product_id</strong></p></td><td><p><strong>product_name</strong></p></td><td><p><strong>price</strong></p></td><td><p><strong>category</strong></p></td></tr><tr><td><p>5</p></td><td><p>Potato</p></td><td><p>40</p></td><td><p>vegetables</p></td></tr><tr><td><p>6</p></td><td><p>Tomato</p></td><td><p>150</p></td><td><p>vegetables</p></td></tr></tbody></table><h5 id="logical-expressions">Logical expressions</h5><p>We are convinced that expressions with comparisons are easy for you to handle. Next, we are going to deal with logical expressions that help us form more complex SQL queries. Here are the three operators from boolean algebra that you are already familiar with:</p><ul><li><p><code class="language-sql">NOT</code><strong> </strong>returns <code class="language-sql">True</code><em> </em>if argument equals to <code class="language-sql">False</code> and vice versa.</p></li><li><p><code class="language-sql">AND</code> compares operands and returns <code class="language-sql">True</code> only if all of them are <code class="language-sql">True</code>. Alternatively, returns <code class="language-sql">False</code><strong><em>.</em></strong></p></li><li><p><code class="language-sql">OR</code> returns <code class="language-sql">True</code> if at least one of the operands is <code class="language-sql">True</code>. Otherwise, returns <code class="language-sql">False</code>.</p></li></ul><p>Please note the order of operators given above, as they are sorted according to their priority (meaning that if we have all three operands in the expression, first we proceed with <code class="language-sql">NOT</code>, then comes <code class="language-sql">AND</code>, and finally <code class="language-sql">OR</code>).</p><p>The picture below shows the logic of the operands mentioned above:</p><p style="text-align: center;"><picture><img alt="Logic expressions compare" height="271" src="https://ucarecdn.com/7fc47bb7-e415-41c0-87a0-4449f208cd9b/" width="774"/></picture></p><p>Now let's study several more examples.</p><p>Below we have a table named <code class="language-sql">staff</code> containing info on programmers working in our company. Imagine we want to make a selection of those fitting for our next project.</p><table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><p><strong>person_id</strong></p></td><td><p><strong>name</strong></p></td><td><p><strong>status</strong></p></td><td><p><strong>skills</strong></p></td><td><p><strong>KPI</strong></p></td></tr><tr><td><p>1</p></td><td><p>Mike</p></td><td><p>Middle</p></td><td><p>SQL</p></td><td><p>80</p></td></tr><tr><td><p>2</p></td><td><p>Sara</p></td><td><p>Senior</p></td><td><p>SQL</p></td><td><p>90</p></td></tr><tr><td><p>3</p></td><td><p>Chan</p></td><td><p>Middle</p></td><td><p>Python</p></td><td><p>70</p></td></tr><tr><td><p>4</p></td><td><p>Mohit</p></td><td><p>Junior</p></td><td><p>Java</p></td><td><p>60</p></td></tr><tr><td><p>5</p></td><td><p>Alisha</p></td><td><p>Junior</p></td><td><p>SQL</p></td><td><p>50</p></td></tr><tr><td><p>6</p></td><td><p>Ivan</p></td><td><p>Middle</p></td><td><p>SQL</p></td><td><p>70</p></td></tr></tbody></table><p>In order to hire the right person for the project, we need a candidate to meet two requirements: be a Middle or a Senior and know SQL.</p><p>Our query should look like this:</p><pre><code class="language-sql">SELECT *
FROM staff
WHERE (status="Middle" OR status="Senior") AND skills="SQL"</code></pre><p>Please note the parentheses that we use with the <code class="language-sql">OR</code> operand. It's an important tool for prioritizing the <code class="language-sql">OR</code> condition over <code class="language-sql">AND</code>. If we do not use it, SQL would first process the <code class="language-sql">AND</code> operand and only then <code class="language-sql">OR</code>, making the query request irrelevant.</p><p>We can arrange the same criteria selection by using the <code class="language-sql">NOT</code> operand instead of <code class="language-sql">OR</code>:</p><pre><code class="language-sql">SELECT *
FROM staff
WHERE NOT(status="Junior") AND skills="SQL"</code></pre><p>Our selection of candidates for the project will look as follows:</p><table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><p><strong>person_id</strong></p></td><td><p><strong>name</strong></p></td><td><p><strong>status</strong></p></td><td><p><strong>skills</strong></p></td><td><p><strong>KPI</strong></p></td></tr><tr><td><p>1</p></td><td><p>Mike</p></td><td><p>Middle</p></td><td><p>SQL</p></td><td><p>80</p></td></tr><tr><td><p>2</p></td><td><p>Sara</p></td><td><p>Senior</p></td><td><p>SQL</p></td><td><p>90</p></td></tr><tr><td><p>6</p></td><td><p>Ivan</p></td><td><p>Middle</p></td><td><p>SQL</p></td><td><p>70</p></td></tr></tbody></table><p>Now we can send proposals to those three lucky ones, and you should continue mastering your SQL skills in order to become one of them.</p><h5 id="conclusion">Conclusion</h5><p>Today we've moved one step further in writing SQL queries. Let us sum up what we've learned from this topic:</p><ul><li><p>We've discovered how to write SQL queries with conditions using <code class="language-sql">WHERE</code> operator.</p></li><li><p>We've figured out how to use <strong>comparisons</strong> in order to extract information from tables.</p></li><li><p>We've applied <strong>logic expressions</strong> for more complex queries and studied priorities of logical operands.</p></li></ul><p>It's time to apply the new skills. Let's move on to the practical part?</p>
</div>